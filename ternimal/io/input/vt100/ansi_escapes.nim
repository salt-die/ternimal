from std/tables import toTable, Table
from ../../io_types import Key, Mods, KeyPressEvent, no_mods

const
  alt: Mods = (true, false, false)
  control: Mods = (false, true, false)
  shift: Mods = (false, false, true)
  alt_control: Mods = (true, true, false)
  alt_shift: Mods = (true, false, true)
  control_shift: Mods = (false, true, true)
  alt_control_shift: Mods = (true, true, true)

  ANSI_ESCAPES*: Table[string, KeyPressEvent] = {
    "\x00": (" ", Key.char, control),
    "\x01": ("a", Key.char, control),
    "\x02": ("b", Key.char, control),
    "\x03": ("c", Key.char, control),
    "\x04": ("d", Key.char, control),
    "\x05": ("e", Key.char, control),
    "\x06": ("f", Key.char, control),
    "\x07": ("g", Key.char, control),
    "\x08": ("h", Key.char, control),
    "\x09": ("", Key.tab, no_mods),
    "\x0a": ("j", Key.char, control),
    "\x0b": ("k", Key.char, control),
    "\x0c": ("l", Key.char, control),
    "\x0d": ("", Key.enter, no_mods),
    "\x0e": ("n", Key.char, control),
    "\x0f": ("o", Key.char, control),
    "\x10": ("p", Key.char, control),
    "\x11": ("q", Key.char, control),
    "\x12": ("r", Key.char, control),
    "\x13": ("s", Key.char, control),
    "\x14": ("t", Key.char, control),
    "\x15": ("u", Key.char, control),
    "\x16": ("v", Key.char, control),
    "\x17": ("w", Key.char, control),
    "\x18": ("x", Key.char, control),
    "\x19": ("y", Key.char, control),
    "\x1a": ("z", Key.char, control),
    "\x1b": ("", Key.escape, no_mods),
    "\x9b": ("", Key.escape, shift),
    "\x1c": ("\\", Key.char, control),
    "\x1d": ("]", Key.char, control),
    "\x1e": ("^", Key.char, control),
    "\x1f": ("-", Key.char, control),
    "\x7f": ("h", Key.char, control),
    "\x1b[1~": ("", Key.home, no_mods),
    "\x1b[2~": ("", Key.insert, no_mods),
    "\x1b[3~": ("", Key.delete, no_mods),
    "\x1b[4~": ("", Key.end, no_mods),
    "\x1b[5~": ("", Key.pgup, no_mods),
    "\x1b[6~": ("", Key.pgdn, no_mods),
    "\x1b[7~": ("", Key.home, no_mods),
    "\x1b[8~": ("", Key.end, no_mods),
    "\x1b[Z": ("", Key.tab, shift),
    "\x1b\x09": ("", Key.tab, shift),
    "\x1b[~": ("", Key.tab, shift),
    "\x1bOP": ("", Key.f1, no_mods),
    "\x1bOQ": ("", Key.f2, no_mods),
    "\x1bOR": ("", Key.f3, no_mods),
    "\x1bOS": ("", Key.f4, no_mods),
    "\x1b[[A": ("", Key.f1, no_mods),
    "\x1b[[B": ("", Key.f2, no_mods),
    "\x1b[[C": ("", Key.f3, no_mods),
    "\x1b[[D": ("", Key.f4, no_mods),
    "\x1b[[E": ("", Key.f5, no_mods),
    "\x1b[11~": ("", Key.f1, no_mods),
    "\x1b[12~": ("", Key.f2, no_mods),
    "\x1b[13~": ("", Key.f3, no_mods),
    "\x1b[14~": ("", Key.f4, no_mods),
    "\x1b[15~": ("", Key.f5, no_mods),
    "\x1b[17~": ("", Key.f6, no_mods),
    "\x1b[18~": ("", Key.f7, no_mods),
    "\x1b[19~": ("", Key.f8, no_mods),
    "\x1b[20~": ("", Key.f9, no_mods),
    "\x1b[21~": ("", Key.f10, no_mods),
    "\x1b[23~": ("", Key.f11, no_mods),
    "\x1b[24~": ("", Key.f12, no_mods),
    "\x1b[25~": ("", Key.f13, no_mods),
    "\x1b[26~": ("", Key.f14, no_mods),
    "\x1b[28~": ("", Key.f15, no_mods),
    "\x1b[29~": ("", Key.f16, no_mods),
    "\x1b[31~": ("", Key.f17, no_mods),
    "\x1b[32~": ("", Key.f18, no_mods),
    "\x1b[33~": ("", Key.f19, no_mods),
    "\x1b[34~": ("", Key.f20, no_mods),
    "\x1b[1;2P": ("", Key.f13, no_mods),
    "\x1b[1;2Q": ("", Key.f14, no_mods),
    "\x1b[1;2R": ("", Key.f15, no_mods),
    "\x1b[1;2S": ("", Key.f16, no_mods),
    "\x1b[15;2~": ("", Key.f17, no_mods),
    "\x1b[17;2~": ("", Key.f18, no_mods),
    "\x1b[18;2~": ("", Key.f19, no_mods),
    "\x1b[19;2~": ("", Key.f20, no_mods),
    "\x1b[20;2~": ("", Key.f21, no_mods),
    "\x1b[21;2~": ("", Key.f22, no_mods),
    "\x1b[23;2~": ("", Key.f23, no_mods),
    "\x1b[24;2~": ("", Key.f24, no_mods),
    "\x1b[1;5P": ("", Key.f1, control),
    "\x1b[1;5Q": ("", Key.f2, control),
    "\x1b[1;5R": ("", Key.f3, control),
    "\x1b[1;5S": ("", Key.f4, control),
    "\x1b[15;5~": ("", Key.f5, control),
    "\x1b[17;5~": ("", Key.f6, control),
    "\x1b[18;5~": ("", Key.f7, control),
    "\x1b[19;5~": ("", Key.f8, control),
    "\x1b[20;5~": ("", Key.f9, control),
    "\x1b[21;5~": ("", Key.f10, control),
    "\x1b[23;5~": ("", Key.f11, control),
    "\x1b[24;5~": ("", Key.f12, control),
    "\x1b[1;6P": ("", Key.f13, control),
    "\x1b[1;6Q": ("", Key.f14, control),
    "\x1b[1;6R": ("", Key.f15, control),
    "\x1b[1;6S": ("", Key.f16, control),
    "\x1b[15;6~": ("", Key.f17, control),
    "\x1b[17;6~": ("", Key.f18, control),
    "\x1b[18;6~": ("", Key.f19, control),
    "\x1b[19;6~": ("", Key.f20, control),
    "\x1b[20;6~": ("", Key.f21, control),
    "\x1b[21;6~": ("", Key.f22, control),
    "\x1b[23;6~": ("", Key.f23, control),
    "\x1b[24;6~": ("", Key.f24, control),
    "\x1b[E": ("", Key.ignore, no_mods),
    "\x1b[G": ("", Key.ignore, no_mods),
    "\x1b[3;2~": ("", Key.delete, shift),
    "\x1b[5;2~": ("", Key.pgup, shift),
    "\x1b[6;2~": ("", Key.pgdn, shift),
    "\x1b[2;3~": ("", Key.insert, alt),
    "\x1b[3;3~": ("", Key.delete, alt),
    "\x1b[5;3~": ("", Key.pgup, alt),
    "\x1b[6;3~": ("", Key.pgdn, alt),
    "\x1b[2;4~": ("", Key.insert, alt_shift),
    "\x1b[3;4~": ("", Key.delete, alt_shift),
    "\x1b[5;4~": ("", Key.pgup, alt_shift),
    "\x1b[6;4~": ("", Key.pgdn, alt_shift),
    "\x1b[3;5~": ("", Key.delete, control),
    "\x1b[5;5~": ("", Key.pgup, control),
    "\x1b[6;5~": ("", Key.pgdn, control),
    "\x1b[3;6~": ("", Key.delete, control_shift),
    "\x1b[5;6~": ("", Key.pgup, control_shift),
    "\x1b[6;6~": ("", Key.pgdn, control_shift),
    "\x1b[2;7~": ("", Key.insert, alt_control),
    "\x1b[5;7~": ("", Key.pgup, alt_control),
    "\x1b[6;7~": ("", Key.pgdn, alt_control),
    "\x1b[2;8~": ("", Key.insert, alt_control_shift),
    "\x1b[5;8~": ("", Key.pgup, alt_control_shift),
    "\x1b[6;8~": ("", Key.pgdn, alt_control_shift),
    "\x1b[A": ("", Key.up, no_mods),
    "\x1b[B": ("", Key.down, no_mods),
    "\x1b[C": ("", Key.right, no_mods),
    "\x1b[D": ("", Key.left, no_mods),
    "\x1b[F": ("", Key.end, no_mods),
    "\x1b[H": ("", Key.home, no_mods),
    "\x1bOA": ("", Key.up, no_mods),
    "\x1bOB": ("", Key.down, no_mods),
    "\x1bOC": ("", Key.right, no_mods),
    "\x1bOD": ("", Key.left, no_mods),
    "\x1bOF": ("", Key.end, no_mods),
    "\x1bOH": ("", Key.home, no_mods),
    "\x1b[1;2A": ("", Key.up, shift),
    "\x1b[1;2B": ("", Key.down, shift),
    "\x1b[1;2C": ("", Key.right, shift),
    "\x1b[1;2D": ("", Key.left, shift),
    "\x1b[1;2F": ("", Key.end, shift),
    "\x1b[1;2H": ("", Key.home, shift),
    "\x1b[1;3A": ("", Key.up, alt),
    "\x1b[1;3B": ("", Key.down, alt),
    "\x1b[1;3C": ("", Key.right, alt),
    "\x1b[1;3D": ("", Key.left, alt),
    "\x1b[1;3F": ("", Key.end, alt),
    "\x1b[1;3H": ("", Key.home, alt),
    "\x1b[1;4A": ("", Key.up, alt_shift),
    "\x1b[1;4B": ("", Key.down, alt_shift),
    "\x1b[1;4C": ("", Key.right, alt_shift),
    "\x1b[1;4D": ("", Key.left, alt_shift),
    "\x1b[1;4F": ("", Key.end, alt_shift),
    "\x1b[1;4H": ("", Key.home, alt_shift),
    "\x1b[1;5A": ("", Key.up, control),
    "\x1b[1;5B": ("", Key.down, control),
    "\x1b[1;5C": ("", Key.right, control),
    "\x1b[1;5D": ("", Key.left, control),
    "\x1b[1;5F": ("", Key.end, control),
    "\x1b[1;5H": ("", Key.home, control),
    "\x1b[5A": ("", Key.up, control),
    "\x1b[5B": ("", Key.down, control),
    "\x1b[5C": ("", Key.right, control),
    "\x1b[5D": ("", Key.left, control),
    "\x1bOc": ("", Key.right, control),
    "\x1bOd": ("", Key.left, control),
    "\x1b[1;6A": ("", Key.up, control_shift),
    "\x1b[1;6B": ("", Key.down, control_shift),
    "\x1b[1;6C": ("", Key.right, control_shift),
    "\x1b[1;6D": ("", Key.left, control_shift),
    "\x1b[1;6F": ("", Key.end, control_shift),
    "\x1b[1;6H": ("", Key.home, control_shift),
    "\x1b[1;7A": ("", Key.up, alt_control),
    "\x1b[1;7B": ("", Key.down, alt_control),
    "\x1b[1;7C": ("", Key.right, alt_control),
    "\x1b[1;7D": ("", Key.left, alt_control),
    "\x1b[1;7F": ("", Key.end, alt_control),
    "\x1b[1;7H": ("", Key.home, alt_control),
    "\x1b[1;8A": ("", Key.up, alt_control_shift),
    "\x1b[1;8B": ("", Key.down, alt_control_shift),
    "\x1b[1;8C": ("", Key.right, alt_control_shift),
    "\x1b[1;8D": ("", Key.left, alt_control_shift),
    "\x1b[1;8F": ("", Key.end, alt_control_shift),
    "\x1b[1;8H": ("", Key.home, alt_control_shift),
    "\x1b[1;9A": ("", Key.up, alt),
    "\x1b[1;9B": ("", Key.down, alt),
    "\x1b[1;9C": ("", Key.right, alt),
    "\x1b[1;9D": ("", Key.left, alt),
    "\x1b[1;5p": ("0", Key.char, control),
    "\x1b[1;5q": ("1", Key.char, control),
    "\x1b[1;5r": ("2", Key.char, control),
    "\x1b[1;5s": ("3", Key.char, control),
    "\x1b[1;5t": ("4", Key.char, control),
    "\x1b[1;5u": ("5", Key.char, control),
    "\x1b[1;5v": ("6", Key.char, control),
    "\x1b[1;5w": ("7", Key.char, control),
    "\x1b[1;5x": ("8", Key.char, control),
    "\x1b[1;5y": ("9", Key.char, control),
    "\x1b[1;6p": ("0", Key.char, control_shift),
    "\x1b[1;6q": ("1", Key.char, control_shift),
    "\x1b[1;6r": ("2", Key.char, control_shift),
    "\x1b[1;6s": ("3", Key.char, control_shift),
    "\x1b[1;6t": ("4", Key.char, control_shift),
    "\x1b[1;6u": ("5", Key.char, control_shift),
    "\x1b[1;6v": ("6", Key.char, control_shift),
    "\x1b[1;6w": ("7", Key.char, control_shift),
    "\x1b[1;6x": ("8", Key.char, control_shift),
    "\x1b[1;6y": ("9", Key.char, control_shift),
    "\x1b[1;7p": ("0", Key.char, alt_control),
    "\x1b[1;7q": ("1", Key.char, alt_control),
    "\x1b[1;7r": ("2", Key.char, alt_control),
    "\x1b[1;7s": ("3", Key.char, alt_control),
    "\x1b[1;7t": ("4", Key.char, alt_control),
    "\x1b[1;7u": ("5", Key.char, alt_control),
    "\x1b[1;7v": ("6", Key.char, alt_control),
    "\x1b[1;7w": ("7", Key.char, alt_control),
    "\x1b[1;7x": ("8", Key.char, alt_control),
    "\x1b[1;7y": ("9", Key.char, alt_control),
    "\x1b[1;8p": ("0", Key.char, alt_control_shift),
    "\x1b[1;8q": ("1", Key.char, alt_control_shift),
    "\x1b[1;8r": ("2", Key.char, alt_control_shift),
    "\x1b[1;8s": ("3", Key.char, alt_control_shift),
    "\x1b[1;8t": ("4", Key.char, alt_control_shift),
    "\x1b[1;8u": ("5", Key.char, alt_control_shift),
    "\x1b[1;8v": ("6", Key.char, alt_control_shift),
    "\x1b[1;8w": ("7", Key.char, alt_control_shift),
    "\x1b[1;8x": ("8", Key.char, alt_control_shift),
    "\x1b[1;8y": ("9", Key.char, alt_control_shift),
    # WSL
    "\x1b[1;3P": ("", Key.f1, alt),
    "\x1b[1;3Q": ("", Key.f2, alt),
    "\x1b[1;3R": ("", Key.f3, alt),
    "\x1b[15;3~": ("", Key.f5, alt),
    "\x1b[17;3~": ("", Key.f6, alt),
    "\x1b[18;3~": ("", Key.f7, alt),
    "\x1b[19;3~": ("", Key.f8, alt),
    "\x1b[20;3~": ("", Key.f9, alt),
    "\x1b[21;3~": ("", Key.f10, alt),
    "\x1b[23;3~": ("", Key.f11, alt),
    "\x1b[24;3~": ("", Key.f12, alt),
    "\x1b[1;7P": ("", Key.f1, alt_control),
    "\x1b[1;7Q": ("", Key.f2, alt_control),
    "\x1b[1;7R": ("", Key.f3, alt_control),
    "\x1b[1;7S": ("", Key.f4, alt_control),
    "\x1b[15;7~": ("", Key.f5, alt_control),
    "\x1b[17;7~": ("", Key.f6, alt_control),
    "\x1b[18;7~": ("", Key.f7, alt_control),
    "\x1b[19;7~": ("", Key.f8, alt_control),
    "\x1b[20;7~": ("", Key.f9, alt_control),
    "\x1b[21;7~": ("", Key.f10, alt_control),
    "\x1b[23;7~": ("", Key.f11, alt_control),
    "\x1b[24;7~": ("", Key.f12, alt_control),
    "\x1b[1;4P": ("", Key.f1, alt_shift),
    "\x1b[1;4Q": ("", Key.f2, alt_shift),
    "\x1b[1;4R": ("", Key.f3, alt_shift),
    "\x1b[1;4S": ("", Key.f4, alt_shift),
    "\x1b[15;4~": ("", Key.f5, alt_shift),
    "\x1b[17;4~": ("", Key.f6, alt_shift),
    "\x1b[18;4~": ("", Key.f7, alt_shift),
    "\x1b[19;4~": ("", Key.f8, alt_shift),
    "\x1b[20;4~": ("", Key.f9, alt_shift),
    "\x1b[21;4~": ("", Key.f10, alt_shift),
    "\x1b[23;4~": ("", Key.f11, alt_shift),
    "\x1b[24;4~": ("", Key.f12, alt_shift),
    "\x1b[1;8P": ("", Key.f1, alt_control_shift),
    "\x1b[1;8Q": ("", Key.f2, alt_control_shift),
    "\x1b[1;8R": ("", Key.f3, alt_control_shift),
    "\x1b[1;8S": ("", Key.f4, alt_control_shift),
    "\x1b[15;8~": ("", Key.f5, alt_control_shift),
    "\x1b[17;8~": ("", Key.f6, alt_control_shift),
    "\x1b[18;8~": ("", Key.f7, alt_control_shift),
    "\x1b[19;8~": ("", Key.f8, alt_control_shift),
    "\x1b[20;8~": ("", Key.f9, alt_control_shift),
    "\x1b[21;8~": ("", Key.f10, alt_control_shift),
    "\x1b[23;8~": ("", Key.f11, alt_control_shift),
    "\x1b[24;8~": ("", Key.f12, alt_control_shift),
    "\x1b\x01": ("a", Key.char, alt_control),
    "\x1b\x02": ("b", Key.char, alt_control),
    "\x1b\x03": ("c", Key.char, alt_control),
    "\x1b\x04": ("d", Key.char, alt_control),
    "\x1b\x05": ("e", Key.char, alt_control),
    "\x1b\x06": ("f", Key.char, alt_control),
    "\x1b\x07": ("g", Key.char, alt_control),
    "\x1b\x08": ("h", Key.char, alt_control),
    "\x1b\x09": ("i", Key.char, alt_control),
    "\x1b\x0a": ("j", Key.char, alt_control),
    "\x1b\x0b": ("k", Key.char, alt_control),
    "\x1b\x0c": ("l", Key.char, alt_control),
    "\x1b\x0d": ("m", Key.char, alt_control),
    "\x1b\x0e": ("n", Key.char, alt_control),
    "\x1b\x0f": ("o", Key.char, alt_control),
    "\x1b\x10": ("p", Key.char, alt_control),
    "\x1b\x11": ("q", Key.char, alt_control),
    "\x1b\x12": ("r", Key.char, alt_control),
    "\x1b\x13": ("s", Key.char, alt_control),
    "\x1b\x14": ("t", Key.char, alt_control),
    "\x1b\x15": ("u", Key.char, alt_control),
    "\x1b\x16": ("v", Key.char, alt_control),
    "\x1b\x17": ("w", Key.char, alt_control),
    "\x1b\x18": ("x", Key.char, alt_control),
    "\x1b\x19": ("y", Key.char, alt_control),
    "\x1b\x1a": ("z", Key.char, alt_control),
  }.toTable
