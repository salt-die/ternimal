from std/tables import toTable, Table
from ../../events import Key, Mods, KeyPressEvent, NO_MODS

const
  ALT: Mods = (true, false, false)
  CONTROL: Mods = (false, true, false)
  SHIFT: Mods = (false, false, true)
  ALT_CONTROL: Mods = (true, true, false)
  ALT_SHIFT: Mods = (true, false, true)
  CONTROL_SHIFT: Mods = (false, true, true)
  ALT_CONTROL_SHIFT: Mods = (true, true, true)

  ANSI_ESCAPES*: Table[string, KeyPressEvent] = {
    "\x00": (" ", Key.char, CONTROL),
    "\x01": ("a", Key.char, CONTROL),
    "\x02": ("b", Key.char, CONTROL),
    "\x03": ("c", Key.char, CONTROL),
    "\x04": ("d", Key.char, CONTROL),
    "\x05": ("e", Key.char, CONTROL),
    "\x06": ("f", Key.char, CONTROL),
    "\x07": ("g", Key.char, CONTROL),
    "\x08": ("h", Key.char, CONTROL),
    "\x09": ("", Key.tab, NO_MODS),
    "\x0a": ("j", Key.char, CONTROL),
    "\x0b": ("k", Key.char, CONTROL),
    "\x0c": ("l", Key.char, CONTROL),
    "\x0d": ("", Key.enter, NO_MODS),
    "\x0e": ("n", Key.char, CONTROL),
    "\x0f": ("o", Key.char, CONTROL),
    "\x10": ("p", Key.char, CONTROL),
    "\x11": ("q", Key.char, CONTROL),
    "\x12": ("r", Key.char, CONTROL),
    "\x13": ("s", Key.char, CONTROL),
    "\x14": ("t", Key.char, CONTROL),
    "\x15": ("u", Key.char, CONTROL),
    "\x16": ("v", Key.char, CONTROL),
    "\x17": ("w", Key.char, CONTROL),
    "\x18": ("x", Key.char, CONTROL),
    "\x19": ("y", Key.char, CONTROL),
    "\x1a": ("z", Key.char, CONTROL),
    "\x1b": ("", Key.escape, NO_MODS),
    "\x9b": ("", Key.escape, SHIFT),
    "\x1c": ("\\", Key.char, CONTROL),
    "\x1d": ("]", Key.char, CONTROL),
    "\x1e": ("^", Key.char, CONTROL),
    "\x1f": ("-", Key.char, CONTROL),
    "\x7f": ("h", Key.char, CONTROL),
    "\x1b[1~": ("", Key.home, NO_MODS),
    "\x1b[2~": ("", Key.insert, NO_MODS),
    "\x1b[3~": ("", Key.delete, NO_MODS),
    "\x1b[4~": ("", Key.end, NO_MODS),
    "\x1b[5~": ("", Key.pgup, NO_MODS),
    "\x1b[6~": ("", Key.pgdn, NO_MODS),
    "\x1b[7~": ("", Key.home, NO_MODS),
    "\x1b[8~": ("", Key.end, NO_MODS),
    "\x1b[Z": ("", Key.tab, SHIFT),
    "\x1b\x09": ("", Key.tab, SHIFT),
    "\x1b[~": ("", Key.tab, SHIFT),
    "\x1bOP": ("", Key.f1, NO_MODS),
    "\x1bOQ": ("", Key.f2, NO_MODS),
    "\x1bOR": ("", Key.f3, NO_MODS),
    "\x1bOS": ("", Key.f4, NO_MODS),
    "\x1b[[A": ("", Key.f1, NO_MODS),
    "\x1b[[B": ("", Key.f2, NO_MODS),
    "\x1b[[C": ("", Key.f3, NO_MODS),
    "\x1b[[D": ("", Key.f4, NO_MODS),
    "\x1b[[E": ("", Key.f5, NO_MODS),
    "\x1b[11~": ("", Key.f1, NO_MODS),
    "\x1b[12~": ("", Key.f2, NO_MODS),
    "\x1b[13~": ("", Key.f3, NO_MODS),
    "\x1b[14~": ("", Key.f4, NO_MODS),
    "\x1b[15~": ("", Key.f5, NO_MODS),
    "\x1b[17~": ("", Key.f6, NO_MODS),
    "\x1b[18~": ("", Key.f7, NO_MODS),
    "\x1b[19~": ("", Key.f8, NO_MODS),
    "\x1b[20~": ("", Key.f9, NO_MODS),
    "\x1b[21~": ("", Key.f10, NO_MODS),
    "\x1b[23~": ("", Key.f11, NO_MODS),
    "\x1b[24~": ("", Key.f12, NO_MODS),
    "\x1b[25~": ("", Key.f13, NO_MODS),
    "\x1b[26~": ("", Key.f14, NO_MODS),
    "\x1b[28~": ("", Key.f15, NO_MODS),
    "\x1b[29~": ("", Key.f16, NO_MODS),
    "\x1b[31~": ("", Key.f17, NO_MODS),
    "\x1b[32~": ("", Key.f18, NO_MODS),
    "\x1b[33~": ("", Key.f19, NO_MODS),
    "\x1b[34~": ("", Key.f20, NO_MODS),
    "\x1b[1;2P": ("", Key.f13, NO_MODS),
    "\x1b[1;2Q": ("", Key.f14, NO_MODS),
    "\x1b[1;2R": ("", Key.f15, NO_MODS),
    "\x1b[1;2S": ("", Key.f16, NO_MODS),
    "\x1b[15;2~": ("", Key.f17, NO_MODS),
    "\x1b[17;2~": ("", Key.f18, NO_MODS),
    "\x1b[18;2~": ("", Key.f19, NO_MODS),
    "\x1b[19;2~": ("", Key.f20, NO_MODS),
    "\x1b[20;2~": ("", Key.f21, NO_MODS),
    "\x1b[21;2~": ("", Key.f22, NO_MODS),
    "\x1b[23;2~": ("", Key.f23, NO_MODS),
    "\x1b[24;2~": ("", Key.f24, NO_MODS),
    "\x1b[1;5P": ("", Key.f1, CONTROL),
    "\x1b[1;5Q": ("", Key.f2, CONTROL),
    "\x1b[1;5R": ("", Key.f3, CONTROL),
    "\x1b[1;5S": ("", Key.f4, CONTROL),
    "\x1b[15;5~": ("", Key.f5, CONTROL),
    "\x1b[17;5~": ("", Key.f6, CONTROL),
    "\x1b[18;5~": ("", Key.f7, CONTROL),
    "\x1b[19;5~": ("", Key.f8, CONTROL),
    "\x1b[20;5~": ("", Key.f9, CONTROL),
    "\x1b[21;5~": ("", Key.f10, CONTROL),
    "\x1b[23;5~": ("", Key.f11, CONTROL),
    "\x1b[24;5~": ("", Key.f12, CONTROL),
    "\x1b[1;6P": ("", Key.f13, CONTROL),
    "\x1b[1;6Q": ("", Key.f14, CONTROL),
    "\x1b[1;6R": ("", Key.f15, CONTROL),
    "\x1b[1;6S": ("", Key.f16, CONTROL),
    "\x1b[15;6~": ("", Key.f17, CONTROL),
    "\x1b[17;6~": ("", Key.f18, CONTROL),
    "\x1b[18;6~": ("", Key.f19, CONTROL),
    "\x1b[19;6~": ("", Key.f20, CONTROL),
    "\x1b[20;6~": ("", Key.f21, CONTROL),
    "\x1b[21;6~": ("", Key.f22, CONTROL),
    "\x1b[23;6~": ("", Key.f23, CONTROL),
    "\x1b[24;6~": ("", Key.f24, CONTROL),
    "\x1b[200~": ("", Key.paste, NO_MODS),
    "\x1b[E": ("", Key.ignore, NO_MODS),
    "\x1b[G": ("", Key.ignore, NO_MODS),
    "\x1b[3;2~": ("", Key.delete, SHIFT),
    "\x1b[5;2~": ("", Key.pgup, SHIFT),
    "\x1b[6;2~": ("", Key.pgdn, SHIFT),
    "\x1b[2;3~": ("", Key.insert, ALT),
    "\x1b[3;3~": ("", Key.delete, ALT),
    "\x1b[5;3~": ("", Key.pgup, ALT),
    "\x1b[6;3~": ("", Key.pgdn, ALT),
    "\x1b[2;4~": ("", Key.insert, ALT_SHIFT),
    "\x1b[3;4~": ("", Key.delete, ALT_SHIFT),
    "\x1b[5;4~": ("", Key.pgup, ALT_SHIFT),
    "\x1b[6;4~": ("", Key.pgdn, ALT_SHIFT),
    "\x1b[3;5~": ("", Key.delete, CONTROL),
    "\x1b[5;5~": ("", Key.pgup, CONTROL),
    "\x1b[6;5~": ("", Key.pgdn, CONTROL),
    "\x1b[3;6~": ("", Key.delete, CONTROL_SHIFT),
    "\x1b[5;6~": ("", Key.pgup, CONTROL_SHIFT),
    "\x1b[6;6~": ("", Key.pgdn, CONTROL_SHIFT),
    "\x1b[2;7~": ("", Key.insert, ALT_CONTROL),
    "\x1b[5;7~": ("", Key.pgup, ALT_CONTROL),
    "\x1b[6;7~": ("", Key.pgdn, ALT_CONTROL),
    "\x1b[2;8~": ("", Key.insert, ALT_CONTROL_SHIFT),
    "\x1b[5;8~": ("", Key.pgup, ALT_CONTROL_SHIFT),
    "\x1b[6;8~": ("", Key.pgdn, ALT_CONTROL_SHIFT),
    "\x1b[A": ("", Key.up, NO_MODS),
    "\x1b[B": ("", Key.down, NO_MODS),
    "\x1b[C": ("", Key.right, NO_MODS),
    "\x1b[D": ("", Key.left, NO_MODS),
    "\x1b[F": ("", Key.end, NO_MODS),
    "\x1b[H": ("", Key.home, NO_MODS),
    "\x1bOA": ("", Key.up, NO_MODS),
    "\x1bOB": ("", Key.down, NO_MODS),
    "\x1bOC": ("", Key.right, NO_MODS),
    "\x1bOD": ("", Key.left, NO_MODS),
    "\x1bOF": ("", Key.end, NO_MODS),
    "\x1bOH": ("", Key.home, NO_MODS),
    "\x1b[1;2A": ("", Key.up, SHIFT),
    "\x1b[1;2B": ("", Key.down, SHIFT),
    "\x1b[1;2C": ("", Key.right, SHIFT),
    "\x1b[1;2D": ("", Key.left, SHIFT),
    "\x1b[1;2F": ("", Key.end, SHIFT),
    "\x1b[1;2H": ("", Key.home, SHIFT),
    "\x1b[1;3A": ("", Key.up, ALT),
    "\x1b[1;3B": ("", Key.down, ALT),
    "\x1b[1;3C": ("", Key.right, ALT),
    "\x1b[1;3D": ("", Key.left, ALT),
    "\x1b[1;3F": ("", Key.end, ALT),
    "\x1b[1;3H": ("", Key.home, ALT),
    "\x1b[1;4A": ("", Key.up, ALT_SHIFT),
    "\x1b[1;4B": ("", Key.down, ALT_SHIFT),
    "\x1b[1;4C": ("", Key.right, ALT_SHIFT),
    "\x1b[1;4D": ("", Key.left, ALT_SHIFT),
    "\x1b[1;4F": ("", Key.end, ALT_SHIFT),
    "\x1b[1;4H": ("", Key.home, ALT_SHIFT),
    "\x1b[1;5A": ("", Key.up, CONTROL),
    "\x1b[1;5B": ("", Key.down, CONTROL),
    "\x1b[1;5C": ("", Key.right, CONTROL),
    "\x1b[1;5D": ("", Key.left, CONTROL),
    "\x1b[1;5F": ("", Key.end, CONTROL),
    "\x1b[1;5H": ("", Key.home, CONTROL),
    "\x1b[5A": ("", Key.up, CONTROL),
    "\x1b[5B": ("", Key.down, CONTROL),
    "\x1b[5C": ("", Key.right, CONTROL),
    "\x1b[5D": ("", Key.left, CONTROL),
    "\x1bOc": ("", Key.right, CONTROL),
    "\x1bOd": ("", Key.left, CONTROL),
    "\x1b[1;6A": ("", Key.up, CONTROL_SHIFT),
    "\x1b[1;6B": ("", Key.down, CONTROL_SHIFT),
    "\x1b[1;6C": ("", Key.right, CONTROL_SHIFT),
    "\x1b[1;6D": ("", Key.left, CONTROL_SHIFT),
    "\x1b[1;6F": ("", Key.end, CONTROL_SHIFT),
    "\x1b[1;6H": ("", Key.home, CONTROL_SHIFT),
    "\x1b[1;7A": ("", Key.up, ALT_CONTROL),
    "\x1b[1;7B": ("", Key.down, ALT_CONTROL),
    "\x1b[1;7C": ("", Key.right, ALT_CONTROL),
    "\x1b[1;7D": ("", Key.left, ALT_CONTROL),
    "\x1b[1;7F": ("", Key.end, ALT_CONTROL),
    "\x1b[1;7H": ("", Key.home, ALT_CONTROL),
    "\x1b[1;8A": ("", Key.up, ALT_CONTROL_SHIFT),
    "\x1b[1;8B": ("", Key.down, ALT_CONTROL_SHIFT),
    "\x1b[1;8C": ("", Key.right, ALT_CONTROL_SHIFT),
    "\x1b[1;8D": ("", Key.left, ALT_CONTROL_SHIFT),
    "\x1b[1;8F": ("", Key.end, ALT_CONTROL_SHIFT),
    "\x1b[1;8H": ("", Key.home, ALT_CONTROL_SHIFT),
    "\x1b[1;9A": ("", Key.up, ALT),
    "\x1b[1;9B": ("", Key.down, ALT),
    "\x1b[1;9C": ("", Key.right, ALT),
    "\x1b[1;9D": ("", Key.left, ALT),
    "\x1b[1;5p": ("0", Key.char, CONTROL),
    "\x1b[1;5q": ("1", Key.char, CONTROL),
    "\x1b[1;5r": ("2", Key.char, CONTROL),
    "\x1b[1;5s": ("3", Key.char, CONTROL),
    "\x1b[1;5t": ("4", Key.char, CONTROL),
    "\x1b[1;5u": ("5", Key.char, CONTROL),
    "\x1b[1;5v": ("6", Key.char, CONTROL),
    "\x1b[1;5w": ("7", Key.char, CONTROL),
    "\x1b[1;5x": ("8", Key.char, CONTROL),
    "\x1b[1;5y": ("9", Key.char, CONTROL),
    "\x1b[1;6p": ("0", Key.char, CONTROL_SHIFT),
    "\x1b[1;6q": ("1", Key.char, CONTROL_SHIFT),
    "\x1b[1;6r": ("2", Key.char, CONTROL_SHIFT),
    "\x1b[1;6s": ("3", Key.char, CONTROL_SHIFT),
    "\x1b[1;6t": ("4", Key.char, CONTROL_SHIFT),
    "\x1b[1;6u": ("5", Key.char, CONTROL_SHIFT),
    "\x1b[1;6v": ("6", Key.char, CONTROL_SHIFT),
    "\x1b[1;6w": ("7", Key.char, CONTROL_SHIFT),
    "\x1b[1;6x": ("8", Key.char, CONTROL_SHIFT),
    "\x1b[1;6y": ("9", Key.char, CONTROL_SHIFT),
    "\x1b[1;7p": ("0", Key.char, ALT_CONTROL),
    "\x1b[1;7q": ("1", Key.char, ALT_CONTROL),
    "\x1b[1;7r": ("2", Key.char, ALT_CONTROL),
    "\x1b[1;7s": ("3", Key.char, ALT_CONTROL),
    "\x1b[1;7t": ("4", Key.char, ALT_CONTROL),
    "\x1b[1;7u": ("5", Key.char, ALT_CONTROL),
    "\x1b[1;7v": ("6", Key.char, ALT_CONTROL),
    "\x1b[1;7w": ("7", Key.char, ALT_CONTROL),
    "\x1b[1;7x": ("8", Key.char, ALT_CONTROL),
    "\x1b[1;7y": ("9", Key.char, ALT_CONTROL),
    "\x1b[1;8p": ("0", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8q": ("1", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8r": ("2", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8s": ("3", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8t": ("4", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8u": ("5", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8v": ("6", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8w": ("7", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8x": ("8", Key.char, ALT_CONTROL_SHIFT),
    "\x1b[1;8y": ("9", Key.char, ALT_CONTROL_SHIFT),
    # WSL
    "\x1b[1;3P": ("", Key.f1, ALT),
    "\x1b[1;3Q": ("", Key.f2, ALT),
    "\x1b[1;3R": ("", Key.f3, ALT),
    "\x1b[15;3~": ("", Key.f5, ALT),
    "\x1b[17;3~": ("", Key.f6, ALT),
    "\x1b[18;3~": ("", Key.f7, ALT),
    "\x1b[19;3~": ("", Key.f8, ALT),
    "\x1b[20;3~": ("", Key.f9, ALT),
    "\x1b[21;3~": ("", Key.f10, ALT),
    "\x1b[23;3~": ("", Key.f11, ALT),
    "\x1b[24;3~": ("", Key.f12, ALT),
    "\x1b[1;7P": ("", Key.f1, ALT_CONTROL),
    "\x1b[1;7Q": ("", Key.f2, ALT_CONTROL),
    "\x1b[1;7R": ("", Key.f3, ALT_CONTROL),
    "\x1b[1;7S": ("", Key.f4, ALT_CONTROL),
    "\x1b[15;7~": ("", Key.f5, ALT_CONTROL),
    "\x1b[17;7~": ("", Key.f6, ALT_CONTROL),
    "\x1b[18;7~": ("", Key.f7, ALT_CONTROL),
    "\x1b[19;7~": ("", Key.f8, ALT_CONTROL),
    "\x1b[20;7~": ("", Key.f9, ALT_CONTROL),
    "\x1b[21;7~": ("", Key.f10, ALT_CONTROL),
    "\x1b[23;7~": ("", Key.f11, ALT_CONTROL),
    "\x1b[24;7~": ("", Key.f12, ALT_CONTROL),
    "\x1b[1;4P": ("", Key.f1, ALT_SHIFT),
    "\x1b[1;4Q": ("", Key.f2, ALT_SHIFT),
    "\x1b[1;4R": ("", Key.f3, ALT_SHIFT),
    "\x1b[1;4S": ("", Key.f4, ALT_SHIFT),
    "\x1b[15;4~": ("", Key.f5, ALT_SHIFT),
    "\x1b[17;4~": ("", Key.f6, ALT_SHIFT),
    "\x1b[18;4~": ("", Key.f7, ALT_SHIFT),
    "\x1b[19;4~": ("", Key.f8, ALT_SHIFT),
    "\x1b[20;4~": ("", Key.f9, ALT_SHIFT),
    "\x1b[21;4~": ("", Key.f10, ALT_SHIFT),
    "\x1b[23;4~": ("", Key.f11, ALT_SHIFT),
    "\x1b[24;4~": ("", Key.f12, ALT_SHIFT),
    "\x1b[1;8P": ("", Key.f1, ALT_CONTROL_SHIFT),
    "\x1b[1;8Q": ("", Key.f2, ALT_CONTROL_SHIFT),
    "\x1b[1;8R": ("", Key.f3, ALT_CONTROL_SHIFT),
    "\x1b[1;8S": ("", Key.f4, ALT_CONTROL_SHIFT),
    "\x1b[15;8~": ("", Key.f5, ALT_CONTROL_SHIFT),
    "\x1b[17;8~": ("", Key.f6, ALT_CONTROL_SHIFT),
    "\x1b[18;8~": ("", Key.f7, ALT_CONTROL_SHIFT),
    "\x1b[19;8~": ("", Key.f8, ALT_CONTROL_SHIFT),
    "\x1b[20;8~": ("", Key.f9, ALT_CONTROL_SHIFT),
    "\x1b[21;8~": ("", Key.f10, ALT_CONTROL_SHIFT),
    "\x1b[23;8~": ("", Key.f11, ALT_CONTROL_SHIFT),
    "\x1b[24;8~": ("", Key.f12, ALT_CONTROL_SHIFT),
    "\x1b\x01": ("a", Key.char, ALT_CONTROL),
    "\x1b\x02": ("b", Key.char, ALT_CONTROL),
    "\x1b\x03": ("c", Key.char, ALT_CONTROL),
    "\x1b\x04": ("d", Key.char, ALT_CONTROL),
    "\x1b\x05": ("e", Key.char, ALT_CONTROL),
    "\x1b\x06": ("f", Key.char, ALT_CONTROL),
    "\x1b\x07": ("g", Key.char, ALT_CONTROL),
    "\x1b\x08": ("h", Key.char, ALT_CONTROL),
    "\x1b\x09": ("i", Key.char, ALT_CONTROL),
    "\x1b\x0a": ("j", Key.char, ALT_CONTROL),
    "\x1b\x0b": ("k", Key.char, ALT_CONTROL),
    "\x1b\x0c": ("l", Key.char, ALT_CONTROL),
    "\x1b\x0d": ("m", Key.char, ALT_CONTROL),
    "\x1b\x0e": ("n", Key.char, ALT_CONTROL),
    "\x1b\x0f": ("o", Key.char, ALT_CONTROL),
    "\x1b\x10": ("p", Key.char, ALT_CONTROL),
    "\x1b\x11": ("q", Key.char, ALT_CONTROL),
    "\x1b\x12": ("r", Key.char, ALT_CONTROL),
    "\x1b\x13": ("s", Key.char, ALT_CONTROL),
    "\x1b\x14": ("t", Key.char, ALT_CONTROL),
    "\x1b\x15": ("u", Key.char, ALT_CONTROL),
    "\x1b\x16": ("v", Key.char, ALT_CONTROL),
    "\x1b\x17": ("w", Key.char, ALT_CONTROL),
    "\x1b\x18": ("x", Key.char, ALT_CONTROL),
    "\x1b\x19": ("y", Key.char, ALT_CONTROL),
    "\x1b\x1a": ("z", Key.char, ALT_CONTROL),
  }.toTable
